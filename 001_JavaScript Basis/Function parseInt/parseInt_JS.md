
# JavaScript `parseInt()` 関数完全ガイド

## ✅ 概要

`parseInt()` は JavaScript におけるグローバル関数で、文字列を整数として解析・変換するために使用されます。
浮動小数点は切り捨てられ、無効な文字に到達すると解析を停止します。

```javascript
parseInt(string, radix);
```

- `string`: 必須。解析したい文字列。
- `radix`: オプション。2〜36 の整数で、解析する数値の基数。省略時は以下のルールに従う：
  - 文字列が `"0x"` または `"0X"` で始まる場合、16進数とみなす。
  - それ以外は10進数と見なされる（ES5以降）。

## ✅ 仕様（ECMAScript）

- `parseInt()` は ECMAScript の仕様に準拠しています（ECMA-262）。
- `radix` を明示しない場合の動作は ES3/ES5/ES6 で異なる挙動があったため、**常に `radix` を指定することが推奨**されます。

---

## ✅ 使用例

```javascript
parseInt("42");           // 42
parseInt("  42abc", 10);  // 42（空白は無視される）
parseInt("0x10");         // 16
parseInt("10", 8);        // 8進数 → 8
parseInt("10", 2);        // 2進数 → 2
```

---

## ✅ 詳細な挙動

###  空白・改行は無視

```javascript
parseInt("   123
", 10); // → 123
```

###  マイナス・プラス記号

```javascript
parseInt("-42", 10); // → -42
parseInt("+42", 10); // → 42
```

###  最初の文字が数値でない場合

```javascript
parseInt("abc123", 10); // → NaN
```

###  文字が途中で混ざった場合

```javascript
parseInt("123abc", 10); // → 123（数値以外が出た時点で打ち切り）
```

---

## ✅ `map(parseInt)` の罠

```javascript
["10", "20", "30"].map(parseInt); // → [10, NaN, NaN]
```

理由： `map()` は `parseInt(value, index)` を呼び出すため、

```javascript
parseInt("20", 1); // NaN → index が 1 → radix = 1（無効）
parseInt("30", 2); // NaN → radix = 2 で "30" は無効
```

**解決法：**

```javascript
["10", "20", "30"].map(str => parseInt(str, 10)); // → [10, 20, 30]
```

---

## ✅ エッジケース・仕様注意点

### Unicode 数字文字列

```javascript
parseInt("１２３", 10); // → NaN（全角数字は対象外）
```

### 浮動小数点数

```javascript
parseInt("12.34", 10); // → 12（小数点以降は無視）
```

### 基数が範囲外

```javascript
parseInt("10", 1);  // → NaN（基数は2〜36）
parseInt("10", 37); // → NaN
```

### 文字の解釈（radix 36）

```javascript
parseInt("z", 36); // → 35（'z' は 36進数で最大）
```

---

## ✅ まとめ

| 特性              | 内容                                            |
|-------------------|--------------------------------------------------|
| 関数名            | `parseInt()`                                     |
| 目的              | 文字列から整数を抽出                             |
| 引数              | (1) 解析対象の文字列, (2) 基数（radix）          |
| 基数の範囲        | 2〜36                                             |
| 戻り値            | 整数 または `NaN`                                |
| 浮動小数           | 小数点以下は無視                                 |
| 空白/改行         | 無視される                                       |
| 推奨              | `radix` を必ず指定する                            |
| よくあるミス      | `map(parseInt)` の使用                            |

---

## ✅ 関連関数との比較

| 関数             | 特徴                                       |
|------------------|--------------------------------------------|
| `parseInt()`     | 整数に変換、途中で切れる                   |
| `parseFloat()`   | 小数を保持、途中で切れる                   |
| `Number()`       | 厳密変換、全体が数値でないと `NaN`         |
| `+"123"`         | 暗黙の `Number()` 同様の動作               |

---

以上が `parseInt()` 関数の完全な解説です。
